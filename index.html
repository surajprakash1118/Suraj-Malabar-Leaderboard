<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MGD Hesaraghatta Master v2.4</title>
    <style>
        :root {
            --bg-black: #050505;
            --card-bg: #121317;
            --precious: #ffea00;
            --divine: #00e5ff;
            --mine: #39ff14;
            --zoul: #ff1744;
            --neon-cyan: #00f2ff;
        }

        body { background-color: var(--bg-black); color: white; font-family: 'Segoe UI', sans-serif; margin: 0; padding: 15px; text-transform: uppercase; }

        /* HEADER */
        .header { text-align: center; margin-bottom: 25px; }
        .main-title { color: var(--neon-cyan); font-size: 28px; font-weight: 900; letter-spacing: 2px; text-shadow: 0 0 10px var(--neon-cyan); margin: 0; }
        .sub-title { color: var(--precious); font-size: 14px; margin: 5px 0; }
        .deadline { color: var(--zoul); font-weight: bold; font-size: 18px; }

        /* SECTION BOXES */
        .outer-box { border: 2px solid var(--neon-cyan); border-radius: 20px; padding: 20px; margin-bottom: 25px; }
        .section-title { text-align: center; font-weight: 900; font-size: 20px; margin-bottom: 20px; letter-spacing: 2px; }

        /* --- TOP PART: TEAM RACING --- */
        .race-card { background: var(--card-bg); border-radius: 12px; padding: 15px; margin-bottom: 12px; border-left: 4px solid #333; }
        .race-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; }
        .race-name { font-size: 18px; font-weight: 900; }
        .race-pct { font-size: 24px; font-weight: 900; }
        .race-track { background: #222; height: 24px; border-radius: 12px; overflow: hidden; position: relative; }
        .race-fill { height: 100%; border-radius: 12px; position: relative; transition: width 1s; }
        .race-icon { position: absolute; right: 0; top: 50%; transform: translateY(-50%); font-size: 16px; }

        /* --- BOTTOM PART: STAFF GRID --- */
        .staff-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 12px; }
        .staff-card { background: var(--card-bg); border-radius: 10px; padding: 12px; border: 1px solid #222; position: relative; overflow: hidden; }
        .staff-tag { display: inline-block; font-size: 9px; font-weight: 900; padding: 2px 6px; border-radius: 3px; color: black; margin-bottom: 8px; }
        
        /* MANAGER OF THE MONTH BADGE */
        .manager-badge { background: linear-gradient(90deg, #ffd700, #ff8c00); color: black; font-size: 8px; font-weight: 900; padding: 3px; text-align: center; margin-bottom: 10px; border-radius: 4px; box-shadow: 0 0 10px rgba(255, 215, 0, 0.4); }
        
        .staff-name { font-size: 16px; font-weight: 900; margin-bottom: 5px; }
        .staff-stats { display: flex; justify-content: space-between; font-size: 9px; font-weight: bold; margin-bottom: 5px; }
        .staff-bar { background: #222; height: 4px; border-radius: 2px; width: 100%; overflow: hidden; }
        .staff-fill { height: 100%; transition: width 1s; }
        .rank-badge { position: absolute; right: 10px; top: 12px; font-size: 10px; color: #666; font-weight: bold; }

        /* TEAM COLORS */
        .PRECIOUS { color: var(--precious); } .PRECIOUS-bg { background: var(--precious); }
        .DIVINE { color: var(--divine); } .DIVINE-bg { background: var(--divine); }
        .MINE { color: var(--mine); } .MINE-bg { background: var(--mine); }
        .ZOUL { color: var(--zoul); } .ZOUL-bg { background: var(--zoul); }

        /* TICKER */
        .ticker { background: #000; border-top: 2px solid var(--neon-cyan); color: var(--neon-cyan); position: fixed; bottom: 0; left: 0; width: 100%; padding: 8px; font-weight: bold; overflow: hidden; z-index: 100; }
        .ticker-move { display: inline-block; white-space: nowrap; animation: move 20s linear infinite; }
        @keyframes move { from { transform: translateX(100%); } to { transform: translateX(-100%); } }
    </style>
</head>
<body>

    <div class="header">
        <h1 class="main-title">MGD HESARAGHATTA</h1>
        <div class="sub-title">MANAGED BY SURAJ PRAKASH</div>
        <div class="deadline">DEADLINE: 31 DAYS PENDING</div>
    </div>

    <div class="outer-box">
        <div class="section-title">TEAM RACE STANDINGS</div>
        <div id="team-racing"></div>
    </div>

    <div class="outer-box">
        <div class="section-title">STAFF LEADERBOARD</div>
        <div id="staff-leaderboard" class="staff-grid"></div>
    </div>

    <div class="ticker">
        <div class="ticker-move" id="ticker-text">LOADING LIVE UPDATES FROM THE HUB...</div>
    </div>

    <script>
        const SHEET_CSV_URL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vS6tzd7SDpOQ6zHwIGlxNBRFGEG-62iLWa2wMyGyFgjxAWQC3KxP_qBicWEWuBaMsCz1Ydeq-im64_b/pub?gid=0&single=true&output=csv';

        async function updateDashboard() {
            try {
                const response = await fetch(SHEET_CSV_URL);
                const data = await response.text();
                const rows = data.split('\n').slice(1);
                
                let teams = [];
                let staff = [];

                rows.forEach(row => {
                    const cols = row.split(',');
                    const entry = {
                        type: cols[0]?.trim().toLowerCase(),
                        name: cols[1]?.trim(),
                        sub: cols[2]?.trim().toUpperCase(),
                        curr: parseFloat(cols[3]) || 0,
                        prev: parseFloat(cols[4]) || 0,
                        icon: cols[5]?.trim() || 'üèéÔ∏è'
                    };
                    if(entry.type === 'team') teams.push(entry);
                    else if(entry.type === 'staff') staff.push(entry);
                });

                // TOP: RACE STANDINGS
                teams.sort((a,b) => b.curr - a.curr);
                document.getElementById('team-racing').innerHTML = teams.map((t, i) => `
                    <div class="race-card" style="border-left-color: var(--${t.name.toLowerCase()})">
                        <div class="race-header">
                            <div class="race-name ${t.name}">${i === 0 ? 'üëë' : ''} ${t.name} <span style="font-size:12px; color:#888;">(${t.sub})</span> <span style="color:var(--mine); font-size:12px;">+${(t.curr - t.prev).toFixed(0)}%</span></div>
                            <div class="race-pct ${t.name}">${t.curr}%</div>
                        </div>
                        <div class="race-track">
                            <div class="race-fill ${t.name}-bg" style="width: ${t.curr}%">
                                <span class="race-icon">${t.icon}</span>
                            </div>
                        </div>
                    </div>
                `).join('');

                // BOTTOM: STAFF GRID
                staff.sort((a,b) => b.curr - a.curr);
                document.getElementById('staff-leaderboard').innerHTML = staff.map((s, i) => {
                    const isLeader = i === 0;
                    const badge = isLeader ? `<div class="manager-badge">MANAGER OF THE MONTH üèÜ</div>` : '';
                    const crown = isLeader ? 'üëë' : '';

                    return `
                        <div class="staff-card">
                            <div class="staff-tag ${s.sub}-bg">${s.sub}</div>
                            ${badge}
                            <div class="staff-name ${s.sub}">${crown} ${s.name}</div>
                            <div class="staff-stats">
                                <span style="color:var(--mine)">+${(s.curr - s.prev).toFixed(0)}% GROWTH</span>
                                <span style="color:#eee">${s.curr}% ACHIEVED</span>
                            </div>
                            <div class="staff-bar">
                                <div class="staff-fill ${s.sub}-bg" style="width: ${Math.min(s.curr, 100)}%"></div>
                            </div>
                            <div class="rank-badge">#${i+1}</div>
                        </div>
                    `;
                }).join('');

                // TICKER
                const leadTeam = teams[0] ? teams[0].name : "N/A";
                const starPerf = staff[0] ? staff[0].name : "N/A";
                document.getElementById('ticker-text').innerText = `LEADING TEAM: ${leadTeam} AT ${teams[0].curr}% | STAR PERFORMER: ${starPerf} AT ${staff[0].curr}% | MGD LIVE HUB`;

            } catch (e) { console.error("Sync Error", e); }
        }

        setInterval(updateDashboard, 30000);
        updateDashboard();
    </script>
</body>
</html>

